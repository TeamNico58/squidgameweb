<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Library</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css">
    <style>
        :root { 
            --bg-light: #f4f4f9; --bg-dark: #121212; 
            --text-light: #333; --text-dark: #e0e0e0; 
            --card-light: #fff; --card-dark: #1e1e1e; 
            --highlight: #6a5acd; 
        }
        [data-theme="dark"] { --bg: var(--bg-dark); --text: var(--text-dark); --card: var(--card-dark); }
        [data-theme="light"] { --bg: var(--bg-light); --text: var(--text-light); --card: var(--card-light); }
        body { font-family: 'Poppins', sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 20px; transition: background 0.3s, color 0.3s; }
        .btn, .toggle { padding: 10px 20px; border: none; border-radius: 5px; background: var(--card); color: var(--text); cursor: pointer; margin: 10px; font-weight: 600; transition: background 0.3s, color 0.3s, transform 0.2s; }
        .btn:hover, .toggle:hover { background: var(--highlight); color: #fff; transform: scale(1.05); }
        .container { display: none; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 20px; margin-top: 20px; opacity: 0; transform: translateY(20px); transition: opacity 0.5s ease, transform 0.5s ease; }
        .container.active { display: grid; opacity: 1; transform: translateY(0); }
        .video { background: var(--card); padding: 15px; border-radius: 10px; text-align: center; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); transition: box-shadow 0.3s, transform 0.3s; }
        .video:hover { box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2); transform: scale(1.02); }
        footer { text-align: center; margin-top: 20px; font-size: 0.9rem; }
        footer a { color: var(--highlight); text-decoration: none; }
        footer a:hover { text-decoration: underline; }
        
        /* Settings Menu */
        .settings-menu { 
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: var(--card); color: var(--text); border-radius: 10px;
            padding: 20px; box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2); display: none;
            z-index: 10;
        }
        .settings-overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.5); display: none; z-index: 9;
        }
        .settings-menu.active, .settings-overlay.active { display: block; }
    </style>
</head>
<body data-theme="dark">
    <!-- Settings Button -->
    <button class="btn" onclick="toggleSettingsMenu()">Settings</button>

    <!-- Settings Menu -->
    <div class="settings-overlay" onclick="toggleSettingsMenu()"></div>
    <div class="settings-menu">
        <h3>Settings</h3>
        <button class="toggle" onclick="toggleTheme()">Toggle Light/Dark Mode</button>
        <button class="btn" onclick="toggleSettingsMenu()">Close</button>
    </div>

    <div style="text-align: center;">
        <button class="btn" onclick="showSeason(1)">Season 1</button>
        <button class="btn" onclick="showSeason(2)">Season 2</button>
    </div>

    <!-- The container where the video content will be injected -->
    <div id="video-container">

    </div>

    <footer>
        <p>Built with ❤️ by <a href="https://example.com" target="_blank">Epik</a></p>
    </footer>

        <script src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Load videos dynamically from videos.html
            fetch('videos.html')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Failed to load videos.html');
                    }
                    return response.text();
                })
                .then(data => {
                    document.getElementById('video-container').innerHTML = data;
                    
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize Plyr for all videos
            const videos = document.querySelectorAll('.plyr');
            videos.forEach(video => {
                new Plyr(video);

                const id = video.id;

                // Restore progress
                const savedTime = localStorage.getItem(id);
                if (savedTime) {
                    video.currentTime = parseFloat(savedTime);
                }

                // Save progress
                video.addEventListener('timeupdate', () => {
                    localStorage.setItem(id, video.currentTime);
                });

                // Clear progress on video end
                video.addEventListener('ended', () => {
                    localStorage.removeItem(id);
                });
            });

            // Start ping calculation
            startPing();
        });

        function toggleTheme() {
            const body = document.body;
            const dark = body.getAttribute('data-theme') === 'dark';
            body.setAttribute('data-theme', dark ? 'light' : 'dark');
            document.querySelector('.toggle').textContent = dark ? 'Dark Mode' : 'Light Mode';
        }

        function showSeason(season) {
            document.querySelectorAll('.container').forEach(c => c.classList.remove('active'));
            document.getElementById('season' + season).classList.add('active');
        }

        function toggleSettingsMenu() {
            const menu = document.querySelector('.settings-menu');
            const overlay = document.querySelector('.settings-overlay');
            menu.classList.toggle('active');
            overlay.classList.toggle('active');
        }
    </script>
</body>
</html>
